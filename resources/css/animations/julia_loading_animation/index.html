<!DOCTYPE html>
<html lang="es">

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Julia Loading Animation</title>

    <link rel="stylesheet" type="text/css" href="css/styles.css">

    <!-- source -->
    <!-- https://codepen.io/dannyhille/pen/zYVRqmx -->
</head>

<body>

    <!-- page content and controls will be here -->
<script type="fragment-shader" id="fragmentShader">
#ifdef GL_ES
precision mediump float;
#endif

uniform float time;
uniform vec2 mouse;
uniform vec2 resolution;
  
#define rotate2D(a) mat2(cos(a),-sin(a),sin(a),cos(a))
#define hsl(h,s,l) (clamp(abs(mod(float(h)*6.0+vec3(0.0,4.0,2.0),6.0)-3.0)-1.0,0.0,1.0)-0.5)*(1.0-abs(2.0*float(l)-1.0))*float(s)+float(l)
  
/*
vec3 hsl(float h, float s, float l){
    return l+s*(clamp(abs(mod(h*6.0+vec3(0.0,4.0,2.0),6.0)-3.0)-1.0,0.0,1.0)-0.5)*(1.0-abs(2.0*l-1.0));
}
*/
  

float nonRecursiveJulia(in vec2 p, in float n){
    for(int i=0;i<80;i++)
        if (n > 0.0 && p.x * p.x + p.y * p.y < n) {
            float nextY = 2. * (p.x * p.y) - .4-sin(time)/5.;
            p.x = p.x * p.x - p.y * p.y - .78;
            p.y = nextY;
            n--;
        }
        else
            break;
	return n / 70.0;
}


void main( void ) {
    vec2 uv =  (gl_FragCoord.xy - 0.5*resolution)/resolution.y;
    vec2 p = uv;
    uv.x += cos(time)/4.;
    uv.y += sin(time)/4.;
    uv *= abs(2.+sin(time/4.)*5.)/5.-2.;
    uv *= rotate2D(time);
    float c = nonRecursiveJulia(uv, 75.0);
    vec3 color = hsl(c/9.-.5,1.+c/2.,.5-c/2.);
    if(p.y<-.497)
	    color=hsl(p.x-time,1.,.5);
	gl_FragColor = vec4(color,1.0);
}
</script>

    <script type="text/javascript" src="js/script.js"></script>

</body>

</html>